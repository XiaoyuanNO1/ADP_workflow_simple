# 智能客服问答路由 Workflow

## 📋 概述

这是一个完整的、可导入 ADP 平台的智能客服 workflow，实现了三层智能问答处理机制。

## ✨ 核心功能

### 三层处理架构

1. **第一层：知识库直接问答**
   - 使用 Youtu MRC Pro 模型
   - 从知识库中快速检索答案
   - 适合常见问题的快速响应

2. **第二层：AI 深度分析**
   - 使用 Deepseek V3.2 模型
   - 对复杂问题进行智能分析
   - 基于常识提供建议性答案

3. **第三层：人工兜底**
   - 对于无法处理的问题
   - 提示用户转接人工客服
   - 保证服务质量

## 🎯 工作流程

```
用户提问
    ↓
知识库检索
    ↓
是否找到答案？
    ├─ 是 → 直接返回答案 → 结束
    └─ 否 → AI深度分析 → 返回分析结果 → 结束
```

## 📦 文件结构

```
export-智能客服问答路由/
├── cd3ff36a-679b-43e0-9ba9-5640ae46881b_workflow.json  # 核心workflow定义
├── workflows.xlsx                                      # workflow元数据
├── parameters.xlsx                                     # 参数定义（空）
├── variables.xlsx                                      # 变量定义（空）
├── example_queries.xlsx                                # 示例查询
└── workflow_references.xlsx                            # workflow引用（空）
```

## 🔧 节点说明

### 1. 开始节点
- **类型**: START
- **功能**: 接收用户输入

### 2. 知识库问答节点
- **类型**: LLM_KNOWLEDGE_QA
- **模型**: Youtu/youtu-mrc-pro
- **功能**: 从知识库检索答案
- **配置**:
  - 文档召回数: 5
  - 文档置信度: 0.3
  - QA召回数: 3
  - QA置信度: 0.85
  - 检索策略: MIXING（混合检索）

### 3. 判断节点
- **类型**: LOGIC_EVALUATOR
- **功能**: 判断是否找到有效答案
- **逻辑**: 语义匹配 "未找到答案"

### 4. 直接回复节点
- **类型**: ANSWER
- **功能**: 返回知识库找到的答案

### 5. 深度分析节点
- **类型**: LLM
- **模型**: Deepseek/deepseek-v3.2
- **功能**: 对复杂问题进行AI分析
- **配置**:
  - Temperature: 0.7
  - TopP: 0.9
  - MaxTokens: 2048

### 6. 回复分析结果节点
- **类型**: ANSWER
- **功能**: 返回AI分析结果，并提示可转人工

### 7. 结束节点
- **类型**: END
- **功能**: 工作流结束

## 🚀 如何导入

### 方法一：通过 ADP 控制台导入

1. 登录 ADP 平台
2. 进入 "工作流" 管理页面
3. 点击 "导入" 按钮
4. 选择整个 `export-智能客服问答路由` 文件夹
5. 确认导入

### 方法二：通过 API 导入

```bash
# 压缩文件夹
cd /data/workspace/ADP_workflow_simple
zip -r customer_service_workflow.zip "export-智能客服问答路由/"

# 使用 API 上传（需要替换 YOUR_TOKEN 和 YOUR_ENDPOINT）
curl -X POST "YOUR_ENDPOINT/api/workflow/import" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@customer_service_workflow.zip"
```

## ⚙️ 配置要求

### 必需资源

1. **知识库**
   - 需要在 ADP 平台配置客服知识库
   - 建议包含常见问题文档
   - 支持 FAQ 格式

2. **模型权限**
   - Youtu/youtu-mrc-pro（知识问答）
   - Youtu/youtu-intent-pro（意图识别）
   - Deepseek/deepseek-v3.2（深度分析）

### 可选配置

- **知识库ID**: 导入后需要在 "知识库问答" 节点配置具体的知识库
- **异常处理**: 已配置自动重试机制
- **超时设置**: 知识库查询60秒，深度分析120秒

## 📊 示例查询

workflow 已预置以下示例查询：

1. 如何重置密码？
2. 产品的退货政策是什么？
3. 我的订单什么时候能发货？
4. 如何联系客服？

## 🔍 技术特点

### 1. 智能路由
- 自动判断问题复杂度
- 分层处理，提高效率
- 保证响应质量

### 2. 异常处理
- 关键节点配置重试机制
- 超时保护
- 异常降级策略

### 3. 语义理解
- 语义匹配而非精确匹配
- 支持多轮对话上下文
- 智能意图识别

### 4. 可扩展性
- 模块化节点设计
- 易于添加新的处理层
- 支持知识库动态配置

## 🎨 节点布局

workflow 采用从左到右的流程布局：

```
开始(100,200) → 知识库问答(300,200) → 判断(500,200)
                                            ├─ 直接回复(700,100) → 结束(1100,200)
                                            └─ 深度分析(700,300) → 回复分析(900,300) → 结束
```

## 💡 使用建议

### 1. 知识库准备
- 整理常见问题及答案
- 使用清晰的文档结构
- 定期更新知识内容

### 2. Prompt 优化
- 根据业务场景调整系统提示词
- 明确回答风格和语气
- 添加业务特定的指引

### 3. 参数调整
- 根据实际效果调整置信度阈值
- 优化召回数量
- 调整模型温度参数

### 4. 监控优化
- 监控各层的命中率
- 分析未解决的问题类型
- 持续优化知识库内容

## 🔗 相关文档

- [ADP Workflow 格式完整解析](../ADP_WORKFLOW_FORMAT.md)
- [ADP 平台使用指南](https://iwiki.woa.com/space/qrobot)
- [Workflow 开发规范](http://git.woa.com/adp/spec)

## 📝 版本信息

- **Workflow ID**: cd3ff36a-679b-43e0-9ba9-5640ae46881b
- **协议版本**: V2_6
- **创建时间**: 2026-02-14
- **更新时间**: 2026-02-14

## ⚠️ 注意事项

1. **知识库配置**: 导入后必须配置知识库ID，否则无法正常工作
2. **模型权限**: 确保有相关模型的使用权限
3. **网络访问**: 需要能访问 ADP 模型服务
4. **测试验证**: 导入后建议先在测试环境验证

## 🤝 贡献

如有问题或建议，欢迎反馈！

---

**Created by**: 小小元 🤖  
**Date**: 2026-02-14  
**Platform**: 腾讯云智能体开发平台 (ADP)
